<div class="ideas-container">
  <!-- Header -->
  <header class="ideas-header">
    <div class="header-content">
      <button class="back-button" (click)="goBack()">â† Back to Groups</button>
      <div class="header-text">
        <h1 class="page-title">{{ groupName || 'Ideas' }}</h1>
        <p class="page-subtitle">Share and vote on ideas</p>
      </div>
      <button *ngIf="!showCreateForm" class="create-idea-btn" (click)="toggleCreateForm()">
        <span class="create-icon">+</span> Share Idea
      </button>
    </div>
  </header>
  <hr class="divider">

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading ideas...</p>
  </div>

  <!-- Create Idea Form -->
  <div *ngIf="showCreateForm" class="create-idea-form">
    <form [formGroup]="createIdeaForm" (ngSubmit)="onCreateIdea()">
      <div class="form-group">
        <label for="ideaTitle">Idea Title</label>
        <input 
          id="ideaTitle" 
          type="text" 
          formControlName="title" 
          placeholder="What's your idea?" 
          class="form-control"
          [class.error]="title?.invalid && title?.touched">
        <div *ngIf="title?.invalid && title?.touched" class="error-message">
          <span *ngIf="title?.errors?.['required']">Title is required</span>
          <span *ngIf="title?.errors?.['minlength']">Minimum 3 characters</span>
          <span *ngIf="title?.errors?.['maxlength']">Maximum 100 characters</span>
        </div>
      </div>

      <div class="form-group">
        <label for="ideaDescription">Description</label>
        <textarea 
          id="ideaDescription" 
          formControlName="description" 
          placeholder="Describe your idea in detail..." 
          rows="4" 
          class="form-control"
          [class.error]="description?.invalid && description?.touched"></textarea>
        <div *ngIf="description?.invalid && description?.touched" class="error-message">
          <span *ngIf="description?.errors?.['required']">Description is required</span>
          <span *ngIf="description?.errors?.['minlength']">Minimum 10 characters</span>
          <span *ngIf="description?.errors?.['maxlength']">Maximum 500 characters</span>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="toggleCreateForm()" [disabled]="isSubmitting">
          Cancel
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="createIdeaForm.invalid || isSubmitting">
          {{ isSubmitting ? 'Sharing...' : 'Share Idea' }}
        </button>
      </div>
    </form>
  </div>

  <!-- No Ideas State -->
  <div *ngIf="!isLoading && ideas.length === 0 && !showCreateForm" class="no-ideas">
    <div class="no-ideas-icon">ğŸ’¡</div>
    <h3>No ideas yet</h3>
    <p>Be the first to share an idea in this group!</p>
    <button class="create-button" (click)="toggleCreateForm()">
      + Share First Idea
    </button>
  </div>

  <!-- Ideas List -->
  <div *ngIf="!isLoading && ideas.length > 0" class="ideas-list">
    <div *ngFor="let idea of ideas; trackBy: trackById" class="idea-card">
      <div class="idea-header">
        <h3 class="idea-title">{{ idea.title }}</h3>
        <div class="idea-status">
          <span *ngIf="idea.isPromotedToProject" class="status-badge promoted">âœ¨ Promoted to Project</span>
          <span *ngIf="idea.isDeleted" class="status-badge deleted">ğŸ—‘ï¸ Deleted</span>
          <span class="status-badge">{{ idea.status }}</span>
        </div>
      </div>

      <p class="idea-description">{{ idea.description }}</p>

      <div class="idea-meta">
        <div class="meta-item">
          <span class="meta-icon">ğŸ‘¤</span>
          <span class="meta-text">{{ idea.userName || 'Anonymous' }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-icon">ğŸ“…</span>
          <span class="meta-text">{{ idea.createdAt | date:'medium' }}</span>
        </div>
      </div>

      <div class="idea-stats">
        <button class="stat-btn" (click)="onVote(idea.id)" [class.voted]="idea.userVoted">
          <span class="stat-icon">ğŸ‘</span>
          <span class="stat-count">{{ idea.voteCount || 0 }} votes</span>
        </button>
        <div class="stat-item">
          <span class="stat-icon">ğŸ’¬</span>
          <span class="stat-count">{{ idea.commentCount || 0 }} comments</span>
        </div>
      </div>

      <div class="idea-actions">
        <button class="action-button" (click)="onViewIdea(idea.id)">
          <span class="action-icon">ğŸ“‹</span>
          Details
        </button>
        <button *ngIf="idea.userId === 'current-user-id'" class="action-button" (click)="onDeleteIdea(idea.id)">
          <span class="action-icon">ğŸ—‘ï¸</span>
          Delete
        </button>
        <button *ngIf="canPromoteIdea(idea)" class="action-button promote" (click)="onPromote(idea.id)">
          <span class="action-icon">âœ¨</span>
          Promote to Project
        </button>
      </div>
    </div>
  </div>
</div>