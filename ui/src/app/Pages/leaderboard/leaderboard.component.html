<app-base-layout>
    <div class="leaderboard-container">
        <header class="leaderboard-header">
            <div class="header-content">
                <h1>üèÜ Leaderboard</h1>
                <p class="subtitle">Top contributors making an impact</p>
            </div>

            <div class="period-selector">
                <button (click)="selectPeriod('week')" [class.active]="selectedPeriod === 'week'" class="period-btn">
                    This Week
                </button>
                <button (click)="selectPeriod('month')" [class.active]="selectedPeriod === 'month'" class="period-btn">
                    This Month
                </button>
                <button (click)="selectPeriod('all')" [class.active]="selectedPeriod === 'all'" class="period-btn">
                    All Time
                </button>
            </div>
        </header>

        <div class="leaderboard-content">
            <div class="podium">
                @if (topContributors[1]) {
                <div class="podium-item second">
                    <div class="rank-badge">2nd</div>
                    <div class="user-avatar">{{topContributors[1].name[0]}}</div>
                    <h3>{{topContributors[1].name}}</h3>
                    <p class="points">{{topContributors[1].points}} pts</p>
                    <span class="level-badge" [style.background]="getLevelColor(topContributors[1].level)">
                        {{topContributors[1].level}}
                    </span>
                </div>
                }

                @if (topContributors[0]) {
                <div class="podium-item first">
                    <div class="crown">üëë</div>
                    <div class="rank-badge">1st</div>
                    <div class="user-avatar champion">{{topContributors[0].name[0]}}</div>
                    <h3>{{topContributors[0].name}}</h3>
                    <p class="points">{{topContributors[0].points}} pts</p>
                    <span class="level-badge" [style.background]="getLevelColor(topContributors[0].level)">
                        {{topContributors[0].level}}
                    </span>
                </div>
                }

                @if (topContributors[2]) {
                <div class="podium-item third">
                    <div class="rank-badge">3rd</div>
                    <div class="user-avatar">{{topContributors[2].name[0]}}</div>
                    <h3>{{topContributors[2].name}}</h3>
                    <p class="points">{{topContributors[2].points}} pts</p>
                    <span class="level-badge" [style.background]="getLevelColor(topContributors[2].level)">
                        {{topContributors[2].level}}
                    </span>
                </div>
                }
            </div>

            <div class="rankings-list">
                @for (user of topContributors.slice(3); track user.userId) {
                <div class="ranking-item">
                    <div class="rank-number">{{user.rank}}</div>
                    <div class="user-info">
                        <div class="user-avatar-small">{{user.name[0]}}</div>
                        <div class="user-details">
                            <div class="user-name">{{user.name}}</div>
                            <span class="user-level" [style.color]="getLevelColor(user.level)">{{user.level}}</span>
                        </div>
                    </div>
                    <div class="user-stats">
                        <div class="stat">
                            <span class="stat-value">{{user.ideasPosted}}</span>
                            <span class="stat-label">Ideas</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">{{user.votesReceived}}</span>
                            <span class="stat-label">Votes</span>
                        </div>
                    </div>
                    <div class="user-points">
                        <span class="points">{{user.points}}</span>
                        <span class="points-label">points</span>
                    </div>
                    @if (user.trend) {
                    <div class="trend" [class]="user.trend">
                        <span class="trend-icon">{{getTrendIcon(user.trend)}}</span>
                        @if (user.rankChange) {
                        <span class="trend-value">{{user.rankChange}}</span>
                        }
                    </div>
                    }
                </div>
                }
            </div>
        </div>
    </div>
</app-base-layout>